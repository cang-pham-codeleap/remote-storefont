{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["/**\n * Extension entry point.\n * This code runs inside the host's Web Worker sandbox.\n *\n * IMPORTANT: This code cannot access:\n * - window\n * - document\n * - localStorage/sessionStorage\n * - cookies\n * - Any DOM APIs\n *\n * It only has access to:\n * - self (the worker global scope)\n * - The onRender callback provided by the host\n * - RemoteRoot API from @remote-ui/core\n */\n\nimport type { RemoteRoot } from '@remote-ui/core';\n\n/**\n * Extend the global scope for TypeScript.\n */\ndeclare const self: DedicatedWorkerGlobalScope & {\n  onRender: (callback: (root: RemoteRoot<string, true>) => void) => void;\n};\n\n/**\n * Track the current button click count for demo purposes.\n */\nlet clickCount = 0;\n\n/**\n * Register the render callback with the host.\n * This is called when the host runs our extension script.\n */\nself.onRender((root) => {\n  // Create a Card component.\n  const card = root.createComponent('Card');\n\n  // Create text content for the card.\n  const textNode = root.createText('Hello from Extension! \uD83D\uDC4B');\n  card.appendChild(textNode);\n\n  // Create a Button component with an onPress handler.\n  const button = root.createComponent('Button', {\n    onPress: () => {\n      clickCount++;\n      // Update the text content to show click count.\n      textNode.updateText(`Clicked ${clickCount} time${clickCount !== 1 ? 's' : ''}! \uD83C\uDF89`);\n\n      // Log to demonstrate we're running in a worker.\n      console.log('[Extension] Button clicked! Count:', clickCount);\n\n      // Attempt to access window to prove it's not available.\n      try {\n        // @ts-expect-error - window is not available in workers\n        console.log('Window:', typeof window);\n      } catch {\n        console.log('[Extension] \u2713 Cannot access window (as expected)');\n      }\n    },\n  });\n  button.appendChild(root.createText('Click me! \uD83D\uDE80'));\n\n  // Append button to card.\n  card.appendChild(button);\n\n  // Add another button to show security demo.\n  const securityButton = root.createComponent('Button', {\n    onPress: () => {\n      // Try to access various browser APIs that should be blocked.\n      const results: string[] = [];\n\n      try {\n        // @ts-expect-error - document is not available in workers\n        results.push(`document: ${typeof document}`);\n      } catch {\n        results.push('document: blocked \u2713');\n      }\n\n      try {\n        // @ts-expect-error - window is not available in workers\n        results.push(`window: ${typeof window}`);\n      } catch {\n        results.push('window: blocked \u2713');\n      }\n\n      try {\n        // @ts-expect-error - localStorage is not available in workers\n        results.push(`localStorage: ${typeof localStorage}`);\n      } catch {\n        results.push('localStorage: blocked \u2713');\n      }\n\n      console.log('[Extension] Security check:', results.join(', '));\n      textNode.updateText('Security check complete! See console.');\n    },\n  });\n  securityButton.appendChild(root.createText('Test Security \uD83D\uDD12'));\n  card.appendChild(securityButton);\n\n  // Append card to root.\n  root.appendChild(card);\n\n  // Mount the UI.\n  root.mount();\n\n  console.log('[Extension] UI mounted successfully!');\n});\n"],
  "mappings": ";;;AA6BA,MAAI,aAAa;AAMjB,OAAK,SAAS,CAAC,SAAS;AAEtB,UAAM,OAAO,KAAK,gBAAgB,MAAM;AAGxC,UAAM,WAAW,KAAK,WAAW,iCAA0B;AAC3D,SAAK,YAAY,QAAQ;AAGzB,UAAM,SAAS,KAAK,gBAAgB,UAAU;AAAA,MAC5C,SAAS,MAAM;AACb;AAEA,iBAAS,WAAW,WAAW,UAAU,QAAQ,eAAe,IAAI,MAAM,EAAE,aAAM;AAGlF,gBAAQ,IAAI,sCAAsC,UAAU;AAG5D,YAAI;AAEF,kBAAQ,IAAI,WAAW,OAAO,MAAM;AAAA,QACtC,QAAQ;AACN,kBAAQ,IAAI,uDAAkD;AAAA,QAChE;AAAA,MACF;AAAA,IACF,CAAC;AACD,WAAO,YAAY,KAAK,WAAW,qBAAc,CAAC;AAGlD,SAAK,YAAY,MAAM;AAGvB,UAAM,iBAAiB,KAAK,gBAAgB,UAAU;AAAA,MACpD,SAAS,MAAM;AAEb,cAAM,UAAoB,CAAC;AAE3B,YAAI;AAEF,kBAAQ,KAAK,aAAa,OAAO,QAAQ,EAAE;AAAA,QAC7C,QAAQ;AACN,kBAAQ,KAAK,0BAAqB;AAAA,QACpC;AAEA,YAAI;AAEF,kBAAQ,KAAK,WAAW,OAAO,MAAM,EAAE;AAAA,QACzC,QAAQ;AACN,kBAAQ,KAAK,wBAAmB;AAAA,QAClC;AAEA,YAAI;AAEF,kBAAQ,KAAK,iBAAiB,OAAO,YAAY,EAAE;AAAA,QACrD,QAAQ;AACN,kBAAQ,KAAK,8BAAyB;AAAA,QACxC;AAEA,gBAAQ,IAAI,+BAA+B,QAAQ,KAAK,IAAI,CAAC;AAC7D,iBAAS,WAAW,uCAAuC;AAAA,MAC7D;AAAA,IACF,CAAC;AACD,mBAAe,YAAY,KAAK,WAAW,yBAAkB,CAAC;AAC9D,SAAK,YAAY,cAAc;AAG/B,SAAK,YAAY,IAAI;AAGrB,SAAK,MAAM;AAEX,YAAQ,IAAI,sCAAsC;AAAA,EACpD,CAAC;",
  "names": []
}
